<html>
	<head>
		<title>Mojo Chiffre (MC-2.0)</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-16">
		<meta charset="ISO-8859-1">
		<meta name="viewport" content="width=device-width; initial-scale=1.0;" /> 
	 </head>
	<body>
		<p><b>Mojo Chiffre (MC-2.0): </b></p>
		Klartext:
		<p><textarea type="text" cols="40" rows="5" id="clear" value=""></textarea></p>		
		<p><button onclick="encode()">encode</button></p>
		<p>Codewort: <input type="text" id="key" value=""></p>
		<p><button onclick="decode()">decode</button></p>
		<p>Chiffre:</p>
		<p><textarea type="text" cols="40" rows="5" id="chiffre" value=""></textarea></p><br>
		<p><button id="LearnMoreBtn">Regeln</button></p>
		<div id="popup">
			1.) Es muss ein Codewort eingegeben werden.<br>
			2.) Die Anzahl an Leerzeichen müssen beim Decodieren eingehalten werden<br><br>
			
			<b>Unterschiede zu MC-1.0:</b><br>
			- UNICODE Werte von 33(!) bis 225(ß)<br>
			- Charset="ISO-8859-1"<br>
			- Beliebige Anzahl an Leerzeichen<br>
			- Character welche nicht im Bereich sind entfallen<br>
			- NICHT abwärtskompatibel zu MC-1.0<br>
		</div>
		<script>
		
			String.prototype.replaceAt=function(index, replacement) {
					return this.substr(0, index) + replacement+ this.substr(index + replacement.length);
				}
		
			function decode() {
				var input = document.getElementById("chiffre").value;
				
				var code = document.getElementById("key").value;
				var output = input;
				
				var x, key, y;
				
				for(var i = 0; i < input.length; i++) {
					if(input.charCodeAt(i) <= 32 || input.charCodeAt(i) >= 226){
						continue;
					}
					x = input.charCodeAt(i) -33;
					key = code.charCodeAt(i%code.length) -33;
					y = x-key;
					if(y<0) y += 193;
					y = y%193;
					var out = String.fromCharCode(y+33);
					output = output.replaceAt(i, String.fromCharCode(y+33));
				}
				
				document.getElementById("clear").value = output;
			}
			
			function encode() {
				var input = document.getElementById("clear").value;
				
				var code = document.getElementById("key").value;
				var output = input;
				
				var x, key, y;
				
				for(var i = 0; i < input.length; i++) {
					if(input.charCodeAt(i) <= 32 || input.charCodeAt(i) >= 226){
						continue;
					}
					x = input.charCodeAt(i) -33;
					key = code.charCodeAt(i%code.length) -33;
					x = (x+key)%193;
					output = output.replaceAt(i, String.fromCharCode(x+33));
				}
				
				document.getElementById("chiffre").value = output;
			}
			
			window.onload = function() {
				document.getElementById("LearnMoreBtn").onclick = function(){
				var popup = document.getElementById("popup");

				if (popup.style.display == "block")
					popup.style.display = "none";
				else
					popup.style.display = "block";
			};
		};
		</script>
		
		<style>
		
		@media only screen and (max-width: 480px) {

		#content {
			width:100%;
			margin-right:0;
			margin-bottom:2%;
		}

		#sidebar1 {
			width:100%;
			height:200px;
			margin-right:0;
			margin-bottom:2%;
		}

		#sidebar2 {
			width:100%;
			height:200px;
			margin-top:2%;
		}
		}
		
		#popup {
			display:none;
		}
		</style>
	</body>
</html>
